-- тайники Коллекционера

local treasures = {
	-- 1. Кордон в районе туннеля
	{{position={x=351.42105102539,y=25.915525436401,z=-25.715570449829},gv=140,lv=589567}},
	-- 2. Кордон старые места
	{{position={x=-86.377746582031,y=-20.526966094971,z=-454.19583129883},gv=12,lv=179174},
	{position={x=-6.803,y=20.882,z=158.032},gv=178,lv=291633},
	{position={x=201.683,y=4.038,z=311.107},gv=238,lv=500329}},
	-- 3. Кордон под мостом
	{{position={x=75.152351379395,y=18.72999382019,z=157.18818664551},gv=97,lv=385576}},
	-- 4. Кордон новые места
	{{position={x=105.57409667969,y=0.39715605974197,z=-4.5521864891052},gv=117,lv=412179},
	{position={x=97.615481567383,y=-2.4717562198639,z=-14.601226806641},gv=114,lv=399528},
	{position={x=124.39332000732,y=-1.2003121376038,z=-16.679014968872},gv=133,lv=428248},
	{position={x=117.9259185791,y=5.960319519043,z=26.719091415405},gv=136,lv=421242},
	{position={x=-235.02212646484,y=1.8344835758209,z=13.847160148621},gv=67,lv=20235},
	{position={x=-215.4833190918,y=-19.035177078247,z=-129.12698364258},gv=62,lv=37929}},
	-- 5. Свалка первый тайник старые места
	{{position={x=-224.04570007324,y=7.8206934928894,z=-10.883823394775},gv=308,lv=17365},
    {position={x=-82.075241088867,y=11.81592464447,z=85.147666931152},gv=334,lv=122607},
    {position={x=-2.243,y=8.452,z=-93.175},gv=296,lv=169168}},
	-- 6. Агропром старые места
	{{position={x=-183.29598999023,y=1.4395978450775,z=-315.74502563477},gv=689,lv=53043},
    {position={x=44.365,y=2.483,z=-147.73},gv=428,lv=280361},
    {position={x=-34.737,y=8.847,z=58.971},gv=529,lv=205801}},
	-- 7. Агропром новые места
	{{position={x=16.826612472534,y=4.8658685684204,z=8.4163234710693},gv=479,lv=256745},
	{position={x=-17.872425079346,y=7.0255553436279,z=46.780091552734},gv=471,lv=222167},
	{position={x=283.56,y=1.31,z=-0.80},gv=693,lv=433712},
	{position={x=79.826774597168,y=13.004108428955,z=-127.27618408203},gv=427,lv=314323},
	{position={x=11.170957565308,y=0.6059817075729,z=-14.41121006012},gv=465,lv=251389},
	{position={x=-74.626205444336,y=7.168550491333,z=51.114906311035},gv=662,lv=166070}},
	-- 8. Подземелье Агропрома
	{{position={x=-80.994879760742,y=-5.1327724456787,z=-71.06413269043},gv=717,lv=2709},
	{position={x=-106.84441375732,y=-11.622317504883,z=-18.213256835938},gv=710,lv=847},
	{position={x=-73.273872375488,y=-16.511434555054,z=-113.74405334473},gv=706,lv=3180},
	{position={x=-132.50715637207,y=-3.959308385849,z=-139.25664672852},gv=810,lv=1},
	{position={x=-112.33020111084,y=-3.96780292511,z=-145.23515625},gv=809,lv=410},
	{position={x=-39.450022888184,y=-3.9488310337067,z=48.175776672363},gv=724,lv=4904},
	{position={x=-62.31685760498,y=-7.6285452842712,z=10.458442459106},gv=774,lv=3821}},
	-- 9. Свалка второй тайник старые места
	{{position={x=99.432174682617,y=-0.20150665938854,z=139.74131774902},gv=364,lv=261645},
    {position={x=105.84417724609,y=13.53165435791,z=178.34651184082},gv=364,lv=270879},
    {position={x=-26.675,y=15.030,z=127.689},gv=354,lv=151724}},
	-- 10. Свалка новые места
	{{position={x=-205.29077148438,y=2.2438249588013,z=12.273218765259},gv=314,lv=28831},
	{position={x=48.359016418457,y=2.6087969779968,z=236.55438232422},gv=359,lv=221779},
	{position={x=-4.9469389915466,y=2.8835237026215,z=313.77852783203},gv=359,lv=197799},
	{position={x=305.1707421875,y=-1.9031262111664,z=-206.63368225098},gv=403,lv=379253},
	{position={x=-101.01932952881,y=15.821808815002,z=20.053113555908},gv=319,lv=112413},
	{position={x=-56.406468353271,y=5.6788549423218,z=2.4708445072174},gv=330,lv=138944},
	{position={x=307.70585327148,y=5.1680736541748,z=144.84521484375},gv=257,lv=382106},
	{position={x=-306.64373779297,y=2.0507090091705,z=-43.910037994385},gv=311,lv=5235}},
	-- 11. Темная Долина старые места
	{{position={x=112.4369354248,y=7.1971774101257,z=-284.38391113281},gv=968,lv=309158},
    {position={x=139.8860168457,y=13.260366439819,z=-212.94372558594},gv=967,lv=346011},
    {position={x=162.795,y=5.170,z=-121.686},gv=921,lv=346150}},
	-- 12. Темная Долина новые места
	{{position={x=9.8774423599243,y=8.5103769302368,z=-212.80395507813},gv=857,lv=185385},
	{position={x=133.25076293945,y=3.451881313324,z=-178.21084594727},gv=926,lv=331007},
	{position={x=28.136596679688,y=6.5471348762512,z=40.68297958374},gv=1001,lv=209571},
	{position={x=106.95184326172,y=8.1356901168823,z=-7.0372295379639},gv=986,lv=303267},
	{position={x=106.99468231201,y=2.91767637729645,z=-7.1575131416321},gv=983,lv=303268},
	{position={x=140.66209411621,y=0.3546652078629,z=-233.67256164551},gv=958,lv=339497},
	{position={x=-2.3263812065125,y=1.8880877733231,z=-23.144087982178},gv=1048,lv=173167},
	{position={x=-17.631416320801,y=-3.9239881038666,z=-280.20999145508},gv=853,lv=153723},
	{position={x=22.895723342896,y=0.085815653204918,z=-328.26092529297},gv=933,lv=201301}},
	-- 13. Х-18
	{{position={x=-1.0404969644547,y=12.031463699341,z=-5.5543141174316},gv=1109,lv=2542},
	{position={x=-5.6516909599304,y=4.1781907081604,z=1.1422207307816},gv=1143,lv=2207},
	{position={x=30.402225494385,y=-8.5089302062988,z=41.211192016602},gv=1161,lv=6520},
	{position={x=12.971666717529,y=-8.9011373519897,z=-11.151793670654},gv=1139,lv=4749},
	{position={x=-16.68733215332,y=7.5298771858215,z=4.3305876731873},gv=1126,lv=1097}},
	-- 14. Бар тренировочный на 4 трубах
    {{position={x=160.3883972168,y=7.5398774147034,z=157.04260253906},gv=1204,lv=39883}},
	-- 15. Бар старые места
	{{position={x=198.72450256348,y=4.449535369873,z=9.6908226013184},gv=1177,lv=47555},
	{position={x=147.54817199707,y=-1.1055772018433,z=44.393001556396},gv=1230,lv=39649},
    {position={x=50.536443481445,y=0.0153919513225555,z=38.801968200684},gv=1224,lv=30951}},
	-- 16. Бар новые места
	{{position={x=139.02583618164,y=0.0935000753403,z=54.208346557617},gv=1253,lv=37657},
	{position={x=113.5701751709,y=-4.8052659034729,z=15.776333808899},gv=1239,lv=33617},
	{position={x=223.80107116699,y=-0.868409538269,z=122.40003967285},gv=1198,lv=56930},
	{position={x=188.83371276855,y=5.3172979354858,z=72.209202575684},gv=1185,lv=45740},
	{position={x=127.42213439941,y=-1.35597894132137,z=93.186706542969},gv=1250,lv=35048},
	{position={x=333.49984741211,y=35.1413230896,z=-230.45585632324},gv=1293,lv=1411},
	{position={x=41.170040130615,y=1.8549175262451,z=150.38230895996},gv=1247,lv=22486},
	{position={x=170.63209838867,y=7.331639289856,z=44.986209869385},gv=1258,lv=43489}},
	-- 17. ДТ первый тайник старые места
	{{position={x=-210.29997253418,y=8.7615175247192,z=44.115196228027},gv=1390,lv=18634},
    {position={x=42.834701538086,y=-0.35385727882385,z=144.73141479492},gv=1308,lv=67621},
    {position={x=-209.555,y=0.0,z=139.823},gv=1367,lv=24983}},
	-- 18. Янтарь старые места
	{{position={x=-70.792358398438,y=0.66766083240509,z=-179.60466003418},gv=1469,lv=48814},
    {position={x=83.347,y=0.237,z=-66.223},gv=1516,lv=81107},
    {position={x=132.463,y=1.122,z=46.029},gv=1523,lv=114006}},
	-- 19. Янтарь новые места
	{{position={x=117.66596984863,y=29.806461334229,z=-337.83111572266},gv=1476,lv=92922},
	{position={x=95.092864990234,y=3.0576491355896,z=-117.88163757324},gv=1462,lv=90615},
	{position={x=77.523390197754,y=2.1298136615753,z=-40.375573730469},gv=1515,lv=80088},
	{position={x=50.392810058594,y=0.49005609750748,z=1.9027116298676},gv=1507,lv=64279},
	{position={x=39.556114196777,y=0.43685582399368,z=12.289625167847},gv=1445,lv=57356},
	{position={x=17.012475967407,y=-11.879430770874,z=-239.1822479248},gv=1478,lv=46590},
	{position={x=-17.991687393188,y=-11.684891166687,z=-244.66241760254},gv=1452,lv=33050},
	{position={x=-17.991687393188,y=-11.684891166687,z=-244.66241760254},gv=1452,lv=33050},
	{position={x=27.361107788086,y=-10.7931251525879,z=-278.43695068359},gv=1480,lv=54978}},
	-- 20. X-16
	{{position={x=135.72601318359,y=34.170707702637,z=-17.531693344116},gv=1542,lv=7333},
	{position={x=115.85702514648,y=7.7595273971558,z=-16.946310043335},gv=1544,lv=7075},
	{position={x=109.23972625732,y=13.920104026794,z=-12.817706108093},gv=1544,lv=6983},
	{position={x=-30.064777755737,y=24.669924850464,z=-12.373635864258},gv=1530,lv=3079},
	{position={x=44.973861694336,y=5.6994729042053,z=-4.4928356170654},gv=1538,lv=5268},
	{position={x=7.6595031929016,y=9.2264947891235,z=16.223276138306},gv=1537,lv=4434},
	{position={x=-95.255046081543,y=25.594078063965,z=-19.292167663574},gv=1529,lv=593},
	{position={x=-131.4186340332,y=28.738174438477,z=-32.350336456299},gv=1529,lv=3},
	{position={x=-45.227046966553,y=23.714029312134,z=2.1262650489807},gv=1530,lv=2337}},
	-- 21. ДТ второй тайник старые места
	{{position={x=-220.78823852539,y=2.810574054718,z=203.17919921875},gv=1334,lv=21907},
    {position={x=-86.319244384766,y=10.677758216858,z=161.18035888672},gv=1421,lv=47042},
    {position={x=-277.31323242188,y=7.6444583892822,z=84.118324279785},gv=1361,lv=3258}},
	-- 22. ДТ новые места
	{{position={x=-257.62590942383,y=7.1882672309875,z=183.54640197754},gv=1339,lv=7249},
	{position={x=-103.4066973877,y=4.8837265968323,z=122.63885498047},gv=1315,lv=43997},
	{position={x=-134.9637298584,y=7.3986001014709,z=112.39208984375},gv=1315,lv=43368},
	{position={x=-188.4233605957,y=6.151390953064,z=86.685207824707},gv=1323,lv=30139},
	{position={x=-223.79579162598,y=4.0734615325928,z=157.42758178711},gv=1346,lv=19873},
	{position={x=-217.16087646484,y=3.8983594179153,z=87.91329498291},gv=1373,lv=26325},
	{position={x=-235.43447875977,y=3.2898578643799,z=109.63154602051},gv=1358,lv=16442},
	{position={x=-170.49014282227,y=-0.0015004277229309,z=106.49577331543},gv=1321,lv=32557}},
	-- 23. АС старые места
	{{position={x=-50.648742675781,y=-18.512454986572,z=345.94873046875},gv=1816,lv=261353},
    {position={x=-129.35345458984,y=-8.3472547531128,z=205.69631958008},gv=1732,lv=186185},
    {position={x=-252.20179443359,y=-1.3025205469131,z=438.26473120117},gv=1852,lv=83079}},
	-- 24. АС новые места
	{{position={x=-124.97633361816,y=10.810700416565,z=413.72769165039},gv=1850,lv=54219},
	{position={x=-372.69134521484,y=-4.3602304458618,z=389.32659912109},gv=1848,lv=786},
	{position={x=-134.94760131836,y=11.116394042969,z=9.557017326355},gv=1625,lv=184606},
	{position={x=-32.180995941162,y=-3.3827826976776,z=51.837771606445},gv=1578,lv=274690},
	{position={x=-301.66571044922,y=-17.553234863281,z=191.84295654297},gv=1788,lv=43300},
	{position={x=-321.48545532227,y=-18.837184906006,z=235.70635009766},gv=1787,lv=26702},
	{position={x=-5.6382684707642,y=-6.8785661697388,z=66.43740234375},gv=1580,lv=301878},
	{position={x=-47.004729766846,y=-6.7584781646729,z=-10.830418205261},gv=1605,lv=262127},
	{position={x=-19.277389526367,y=-7.3648452758789,z=-26.303735733032},gv=1593,lv=291611}},
	-- 25. Радар старые места
	{{position={x=161.33935546875,y=12.651428222656,z=-2.3661255836487},gv=1943,lv=50642},
    {position={x=616.28942871094,y=-40.626621246338,z=-200.26759338379},gv=1885,lv=207016},
    {position={x=560.351,y=-53.215,z=-127.516},gv=2046,lv=195389}},
	-- 26. Радар на горбу монстра, покидающего Зону
	{{position={x=546.88079833984,y=-17.241422653198,z=202.39251708984},gv=1921,lv=139505}},
	-- 27. Радар новые места
	{{position={x=470.87244140625,y=-48.971716308594,z=-22.001342697144},gv=1919,lv=154726},
	{position={x=345.57938842773,y=-42.609164428711,z=-26.243650436401},gv=2031,lv=89768},
	{position={x=639.60775146484,y=-38.317578887939,z=187.28877258301},gv=1911,lv=226124},
	{position={x=623.61175537109,y=-21.863321304321,z=-306.61221923828},gv=2113,lv=223068},
	{position={x=-34.676868438721,y=3.3331246376038,z=-15.831679344177},gv=2115,lv=108},
	{position={x=-16.732157958984,y=3.5158343315125,z=-55.414615631104},gv=1960,lv=5406},
	{position={x=-48.003952026367,y=4.7984647750854,z=-59.560840606689},gv=1960,lv=11},
	{position={x=-42.361370849609,y=-0.10249519824982,z=1.5886373519897},gv=1960,lv=5037}},
	-- 28. Х-10
	{{position={x=-59.789770507813,y=-18.628295516968,z=29.551867675781},gv=2725,lv=327},
	{position={x=22.528390884399,y=-16.835718154907,z=16.103488922119},gv=2772,lv=8798},
	{position={x=-30.900574493408,y=-16.997395706177,z=-24.655044174194},gv=2707,lv=2120},
	{position={x=-18.275852203369,y=-8.8153561592102,z=11.361993789673},gv=2673,lv=3626},
	{position={x=11.160486221313,y=-5.5647749900818,z=36.388645172119},gv=2681,lv=7937},
	{position={x=-7.1936350822449,y=-7.3882327079773,z=-79.205902709961},gv=2661,lv=4592},
	{position={x=-7.7008905410767,y=-4.7707008171082,z=-7.7946062088013},gv=2783,lv=4463},
	{position={x=10.98579246521,y=-21.907592773438,z=58.682081604004},gv=2758,lv=8097}},
	-- 29. Центральная Припять старые места
	{{position={x=201.11410522461,y=5.9711012840271,z=92.476623535156},gv=2145,lv=259855},
    {position={x=-31.510738372803,y=2.2739319801331,z=14.700297355652},gv=2160,lv=67042},
    {position={x=114.40975189209,y=3.9538445472717,z=-35.126991271973},gv=2241,lv=214932}},
	-- 30. Центральная Припять новые места
	{{position={x=-122.06163787842,y=-2.2193782329559,z=-19.114757537842},gv=2256,lv=6505},
	{position={x=-50.404895782471,y=0.5092362165451,z=-139.14837646484},gv=2133,lv=57794},
	{position={x=16.592649459839,y=-0.29210752248764,z=271.5228503418},gv=2261,lv=121526},
	{position={x=-37.367603302002,y=-2.1764883995056,z=-186.08340454102},gv=2134,lv=63568},
	{position={x=191.21447143555,y=-1.9588086605072,z=232.0145690918},gv=2149,lv=260050},
	{position={x=38.198509216309,y=2.2733097076416,z=49.620254516602},gv=2225,lv=148502},
	{position={x=86.779762268066,y=-1.4520432949066,z=45.51127243042},gv=2222,lv=198827},
	{position={x=-12.239675521851,y=2.180225610733,z=-139.74966430664},gv=2133,lv=87283},
	{position={x=-30.884196014404,y=9.4293556213379,z=199.7724609375},gv=2197,lv=70140}},
	-- 31. ЧАЭС-1 старые места
	{{position={x=837.88433837891,y=-0.001165896654129,z=55.943096160889},gv=2296,lv=348685},
    {position={x=854.89282226563,y=-0.0051247179508209,z=-321.72738647461},gv=2401,lv=401113},
    {position={x=1081.2141113281,y=-1.5098346471786,z=-27.409960174561},gv=2401,lv=408043}},
	-- 32. ЧАЭС-1 новые места
	{{position={x=78.459854125977,y=-0.0015828311443329,z=-60.556144714355},gv=2375,lv=50452},
	{position={x=119.79934844971,y=14.395437240601,z=-1.1088252878189},gv=2378,lv=79740},
	{position={x=918.662109375,y=1.2630226373672,z=-40.100505828857},gv=2293,lv=404737},
	{position={x=294.67169189453,y=-0.056998193264008,z=-235.80526733398},gv=2348,lv=122828},
	{position={x=237.33578491211,y=2.6054816150665,z=-59.907493591309},gv=2379,lv=99955},
	{position={x=815.73101806641,y=2.6143026351929,z=-232.94845581055},gv=2289,lv=351506}},
	-- 33. Саркофаг
	{{position={x=37.354110717773,y=18.984546661377,z=-24.232685089111},gv=2453,lv=6914},
	{position={x=23.900804519653,y=14.691637992859,z=24.380633163452},gv=2460,lv=6103},
	{position={x=52.43770980835,y=16.843309402466,z=32.019092559814},gv=2462,lv=8997},
	{position={x=17.898468017578,y=-0.68915146589279,z=2.4945793151855},gv=2424,lv=4172},
	{position={x=21.257373809814,y=0.033212799578905,z=15.975848197937},gv=2408,lv=4955}},
	-- 34. Бункер Управления Монолитом
	{{position={x=-8.4166831970215,y=-34.325794219971,z=-4.8778147506714},gv=2484,lv=1533},
	{position={x=-14.121637763977,y=-34.473350524902,z=29.400852203369},gv=2482,lv=1308},
	{position={x=-43.807549591064,y=-34.39828994751,z=-35.362218780518},gv=2477,lv=13},
	{position={x=-43.45103012085,y=-32.260471343994,z=-24.219442367554},gv=2504,lv=96}},
	-- 35. ЧАЭС-2
	{{position={x=-49.587427520752,y=10.0211449813843,z=187.45875549316},gv=2521,lv=7877},
	{position={x=133.93000000000,y=32.01000000000,z=148.93271484375},gv=2561,lv=64665},
	{position={x=213.74848999023,y=23.305574035645,z=190.41730651855},gv=2570,lv=80085},
	{position={x=564.91600341797,y=25.965451049805,z=215.68375427246},gv=2628,lv=167912},
	{position={x=43.826638641357,y=7.4956579208374,z=341.61141357422},gv=2543,lv=44834},
	{position={x=906.66754150391,y=-0.0001489520072937,z=-53.895790100098},gv=2533,lv=53527},
	{position={x=23.224559783936,y=29.006414413452,z=280.60556030273},gv=2545,lv=34702},
	{position={x=912.40310058594,y=5.9985642433167,z=164.02452880859},gv=2637,lv=240846},
	{position={x=869.33255371094,y=16.891032333374,z=94.130062866211},gv=2635,lv=227382}},
	-- 36. Красавица и Чудовище
	{{position={x=297.86645507813,y=-43.280475616455,z=-209.13801574707},gv=2083,lv=64137}},
	-- 37. Холмы Радара
	{{position={x=571.65832519531,y=-43.965873718262,z=-70.539352416992},gv=2044,lv=197523}}
}

local effects = {
	"dead_zone.ppe",
	"deadcity_wake.ppe",
	"deadcity_wake1.ppe",
	"monolith_off.ppe",
	"radar_psi.ppe",
	"snd_shock.ppe",
	"psi.ppe",
	"vibros.ppe",
	"vibros_p.ppe"
}

local sound_spawn = {
	[[ambient\random\rnd_scr4]],
	[[ambient\random\rnd_moan5]],
	[[ambient\random\rnd_scr10]],
	[[ambient\random\rnd_fallscream]],
	[[ambient\random\rnd_ratchant]],
	[[ambient\random\rnd_respawn]],
	[[ambient\random\rnd_moan1]]
}

function spawn_next(n)
	-- удаляем старую записку
	amk.remove_item(Actor:object("val_zapis_"..tostring(n-1)))

	if n <= #treasures then
		-- выбираем где спавнить
		local a = treasures[n]
		local b = table.random(a)
		local obj=create("val_taynik_"..n, xyz(b.position.x,b.position.y,b.position.z), b.lv, b.gv)

		-- Proper72 K телепорт вместо увеличенного прыжка для тайника на Кордоне и другие дополнения
		if n==1 then
		  if not has_info("coll_tele1_on") then
			local se_obj = create("val_teleport_1",xyz(346.98187255859,18.106950759888,-15.256704330444),587878,2)
			set_value("val_teleport_1", se_obj.id)
			give_info("coll_tele1_on")
		  end

		elseif n==2 then
		  if has_info("coll_tele1_on") then
			local obj_id = get_value("val_teleport_1", -1, true)
			local se_obj = server_object(obj_id)
			if se_obj then
				release(se_obj, true)
			end
			disable_info("coll_tele1_on")
		  end

		elseif n==17 and b==2 then
			create("amk_kanistra",xyz(39.229396820068,-0.0083452463150024,150.32916259766),67621,1308)
		-- Proper72 end

		elseif n==37 then
			valerich_dialog.spawn_tel()
		end
	else
		-- последняя записка с холмов Радара - удаляем телепорты
		valerich_dialog.release_tel()
		local effect=table.random(effects)
		level.add_pp_effector(effect, 77777776, false)
		say(table.random(sound_spawn))
		amk_particle.amk_particle({
			particle	= "amk\\zomb_explode",
			pos		= Actor:position()
		})
		amk.spawn_skel(Actor)
		give_info("coll_end")
	end
end
