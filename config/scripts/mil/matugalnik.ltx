[logic]
active = ph_sound@normal
on_hit = hit

[hit]
on_info = %+mil_matugalnik_off%

[ph_sound@normal]
snd = music_fri_day
on_info = {+mil_freedom_under_attack} ph_sound@alarm
on_info2 = {+mil_matugalnik_off} ph_idle%off
on_info3 = {=is_fri_eve} ph_sound@evening
on_info4 = {=is_fri_nig} ph_idle

[ph_sound@evening]
snd = music_fri_eve
on_info = {+mil_freedom_under_attack} ph_sound@alarm
on_info2 = {+mil_matugalnik_off} ph_idle%off
on_info3 = {=is_fri_day} ph_sound@normal
on_info4 = {=is_fri_nig} ph_sound@ph_idle

[ph_idle]
on_info = {+mil_freedom_under_attack} ph_sound@alarm
on_info2 = {+mil_matugalnik_off} ph_idle%off
on_info3 = {=is_fri_day} ph_sound@normal
on_info4 = {=is_fri_eve} ph_sound@evening

[ph_sound@alarm]
snd = siren
on_info = {-mil_freedom_under_attack} ph_sound@normal
on_info2 = {+mil_matugalnik_off} ph_idle%off
looped = true

[ph_idle%off]
on_info = {=dist_to_actor_ge(100) !gulag_empty(mil_freedom)} ph_sound@normal %-mil_matugalnik_off%
